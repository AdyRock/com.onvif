{
  "id": "com.onvif",
  "version": "1.1.12",
  "compatibility": ">=3.0.0",
  "sdk": 2,
  "brandColor": "#FF7D4B",
  "name": {
    "en": "ONVIF Camera",
    "de": "ONVIF Kamera",
    "nl": "ONVIF Camera",
    "it": "ONVIF Camera"
  },
  "description": {
    "en": "Support for ONVIF compatible cameras",
    "de": "Unterst√ºtzung f√ºr ONVIF kompatible Kameras",
    "nl": "Ondersteuning voor ONVIF-compatibele camera's",
    "it": "Supporto per fotocamere compatibili ONVIF"
  },
  "category": [
    "video"
  ],
  "permissions": [],
  "bugs": {
    "url": "https://github.com/AdyRock/com.onvif/issues"
  },
  "source": "https://github.com/AdyRock/com.onvif",
  "homeyCommunityTopicId": 28377,
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Adrian Rockall",
    "email": "ady@rockall.plus.com"
  },
  "contributors": {
    "translators": [
      {
        "name": "üá©üá™ - Markus Mahr"
      },
      {
        "name": "nl - Ton Lemmen"
      },
      {
        "name": "it - Andrea Mascioni"
      }
    ]
  },
  "flow": {
    "triggers": [
      {
        "id": "motionEnabledTrigger",
        "title": {
          "en": "Motion enabled",
          "de": "Bewegung eingeschaltet",
          "nl": "Beweging actief",
          "it": "Motion abilitato,"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "motionDisabledTrigger",
        "title": {
          "en": "Motion disabled",
          "de": "Bewegung abgeschaltet",
          "nl": "Beweging inactief",
          "it": "Motion disabilitato,"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "snapshotReadyTrigger",
        "title": {
          "en": "Now snapshot ready",
          "de": "Keine Standbilder bereit",
          "nl": "Snapshot beschikbaar",
          "it": "Immagine Istantanea pronta,"
        },
        "tokens": [
          {
            "name": "image",
            "type": "image",
            "title": {
              "en": "Now Image",
              "de": "Standbild erstellen",
              "nl": "Snapshot",
              "it": "Immagine Istantanea,"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "eventShotReadyTrigger",
        "title": {
          "en": "Motion snapshot ready",
          "de": "Momentaufnahme bereit",
          "nl": "Bewegings snapshot beschikbaar",
          "it": "Immagine di Movimento pronta,"
        },
        "tokens": [
          {
            "name": "eventImage",
            "type": "image",
            "title": {
              "en": "Motion Image",
              "de": "Momentaufnahme",
              "nl": "Bewegings snapshot",
              "it": "Immagine di Movimento,"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "motionEnabledCondition",
        "title": {
          "en": "Motion is !{{enabled|disabled}}",
          "de": "Bewegung ist !{{eingeschaltet|abgeschaltet}}",
          "nl": "Beweging is !{{actief|inactief}}",
          "it": "Movimento √® !{{abilitato|disabilitato}},"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "motionReadyCondition",
        "title": {
          "en": "Motion image is ready within..."
        },
        "titleFormatted": {
          "en": "Motion image is !{{ready|not ready}} within [[waitTime]] seconds"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          },
          {
            "type": "number",
            "name": "waitTime",
            "value": 0,
            "units": "seconds",
            "min": 0,
            "max": 30,
            "step": 1,
            "placeholder": "Seconds to wait"
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "motionEnableAction",
        "title": {
          "en": "Enable motion",
          "de": "Bewegung einschalten",
          "nl": "Beweging actief",
          "it": "Movimento Abilitato,"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "motionDisableAction",
        "title": {
          "en": "Disable motion",
          "de": "Bewegung abschalten",
          "nl": "Beweging inactief",
          "it": "Movimento Disabilitato,"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "snapshotAction",
        "title": {
          "en": "Update Now snapshot",
          "de": "Standbild jetzt erneuern",
          "nl": "Ververs snapshot",
          "it": "Aggiorna Immagine Istantanea"
        },
        "deprecated": true,
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      },
      {
        "id": "updateMotionImageAction",
        "title": {
          "en": "Update Motion snapshot",
          "de": "Motion-Snapshot aktualisieren",
          "nl": "Bewegingssnapshot bijwerken",
          "it": "Aggiorna istantanea in movimento"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=camera"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "id": "camera",
      "name": {
        "en": "Camera",
        "de": "Kamera",
        "nl": "Camera"
      },
      "class": "sensor",
      "capabilities": [
        "motion_enabled",
        "alarm_motion",
        "alarm_tamper",
        "event_time",
        "tamper_time",
        "date_time",
        "button.syncTime"
      ],
      "capabilitiesOptions": {
        "button.syncTime": {
          "maintenanceAction": true,
          "title": {
            "en": "Sync. Time",
            "de": "Sync. Uhrzeit",
            "nl": "Synchronisatie tijd",
            "it": "Sinc. Orario"
          },
          "desc": {
            "en": "Set the camera time to Homey's time.",
            "de": "Setzte die Kamerazeit mit Homeys Zeit gleich",
            "nl": "Synchroniseer de camera tijd met Homey",
            "it": "Imposta l'ora camera come quella di Homey."
          }
        },
        "alarm_tamper": {
          "title": {
            "en": "Offline / Tamper Alarm",
            "de": "Offline / Manipulationsalarm",
            "nl": "Offline / sabotage alarm",
            "it": "Allarme Offline / Tamper"
          }
        }
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "login"
          },
          "options": {
            "singular": true
          }
        },
        {
          "id": "login",
          "template": "login_credentials"
        },
        {
          "id": "list_devices2",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          },
          "options": {
            "singular": false
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "repair": [
        {
          "id": "login",
          "template": "login_credentials"
        }
      ],
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Credentials",
            "de": "Zugangsdaten",
            "nl": "Inloggegevens",
            "it": "Credenziali"
          },
          "children": [
            {
              "id": "username",
              "type": "text",
              "label": {
                "en": "User Name",
                "de": "Benutzernamen",
                "nl": "User Naam",
                "it": "Nome Utente"
              },
              "value": "",
              "hint": {
                "en": "User name required to login to the camera.",
                "de": "Benutzername zum Zugang zur Kamera erforderlich.",
                "nl": "User naam nodig om in te loggen in de camera",
                "it": "Nome Utente richiesto per il login con la camera."
              }
            },
            {
              "id": "password",
              "type": "password",
              "label": {
                "en": "Password",
                "de": "Passwort",
                "nl": "Password",
                "it": "Password"
              },
              "value": "",
              "hint": {
                "en": "Password required to login to the camera.",
                "de": "Passwort zum Zugang zur Kamera erforderlich.",
                "nl": "Password nodig om in te loggen in de camera",
                "it": "Password richiesta per il login con la camera."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Motion Trigger",
            "de": "Bewegungsmelder",
            "nl": "Bewegings trigger",
            "it": "Motion Trigger,"
          },
          "children": [
            {
              "id": "classType",
              "type": "dropdown",
              "label": {
                "en": "Device Class",
                "de": "Ger√§teklasse",
                "nl": "Product indeling",
                "it": "Classe Dispositivo"
              },
              "value": "sensor",
              "hint": {
                "en": "When set to Sensor an icon appears on the device tile when motion is detected. When set to Camera, the image might be displayed in other dashboards",
                "de": "Wenn Sensor ausgew√§hlt wird, wird bei Bewegung ein Icon in der Ger√§tekachel angezeigt. When Kamera ausgew√§hlt wird, wird ein Bild in anderen Dashboards dargestellt.",
                "nl": "Indien ingesteld op Sensor verschijnt er een icoon op het device tot er beweging gedetecteerd is. Indien ingesteld op Camera, wordt de afbeelding mogelijk weergegeven op andere plaatsen",
                "it": "Quando come Sensore, un icona compare sul tile del dispositivo quando un movimento √® rilevato. Quando come Camera, l'immagine pu√≤ essere mostrata in altre dashboards"
              },
              "values": [
                {
                  "id": "sensor",
                  "label": {
                    "en": "Sensor",
                    "de": "Sensor"
                  }
                },
                {
                  "id": "camera",
                  "label": {
                    "en": "Camera",
                    "de": "Kamera"
                  }
                }
              ]
            },
            {
              "id": "single",
              "type": "checkbox",
              "label": {
                "en": "Single",
                "de": "Einzeln",
                "nl": "Enkel",
                "it": "Singolo,"
              },
              "value": true,
              "hint": {
                "en": "Motion detection waits for no motion before triggering a new motion.",
                "de": "Bewegungserkennung wartet bis keine Bewegung mehr auftritt, bevor eine weitere Bewegung gemeldet wird.",
                "nl": "Bewegings detectie wacht tot er geen beweging is voordat er een nieuwe trigger volgt",
                "it": "Rilevazione movimento attende nessun movimento prima di nuova rilevazione."
              }
            },
            {
              "id": "delay",
              "type": "number",
              "label": {
                "en": "Delay",
                "de": "Verz√∂gerung",
                "nl": "Vertraging",
                "it": "Ritardo,"
              },
              "value": 0.5,
              "units": "seconds",
              "hint": {
                "en": "Delay before image capture after motion triggered.",
                "de": "Verz√∂gerung bei Bewegung, bevor ein Standbild aufgenommen wird.",
                "nl": "Vertraging voor Snapshot na beweging",
                "it": "Ritardo prima che l'immgine sia catturata dopo un movimento rilevato.,"
              }
            },
            {
              "id": "channel",
              "type": "number",
              "label": {
                "en": "Channel"
              },
              "value": 1,
              "hint": {
                "en": "Experimental channel selection."
              }
            },
            {
              "id": "token",
              "type": "text",
              "label": {
                "en": "Token"
              },
              "value": "",
              "hint": {
                "en": "Experimental channel event token."
              }
            },
            {
              "id": "preferPullEvents",
              "type": "checkbox",
              "label": {
                "en": "Prefer Pull Events",
                "de": "Bevorzuge Empfangsmitteilungen",
                "nl": "Voorkeur voor Pull Events",
                "it": "Preferenza Pull Events"
              },
              "value": false,
              "hint": {
                "en": "If both Pull and Push events are available then choose Pull when checked. Push is more efficient but may not work on some network setups.",
                "de": "Wenn beide √úbertragungsm√∂glichkeiten vorhanden sind, wird der Empfang bevorzugt. Die Anfrage ist effizienter, kann aber in manchen Netzwerken nicht funktionieren.",
                "nl": "Als Pull en Push allebei beschikbaar zijn, kies dan Pull (indien gecontroleerd). Push is effici√´nter maar werkt bij sommige netwerk setups niet",
                "it": "Se sono disponivili sia gli eventi Push che Pull allora seleziona Pull, dato che Push √® si pi√π efficiente ma non funziona con alcuni setup della rete."
              }
            },
            {
              "id": "timeFormat",
              "type": "dropdown",
              "label": {
                "en": "Time Format",
                "de": "Zeitformat",
                "nl": "Tijd format",
                "it": "Formato del Tempo,"
              },
              "value": "mm_dd",
              "hint": {
                "en": "The format to show the time capabilities.",
                "de": "Zeitformat das zur Anzeige genutzt werden soll.",
                "nl": "Tijd format notatie mogelijkheden",
                "it": "Il formato mosta capabilities del Tempo.,"
              },
              "values": [
                {
                  "id": "raw",
                  "label": {
                    "en": "Direct From Camera",
                    "de": "Direkt von der Kamera",
                    "nl": "Live",
                    "it": "Diretto dalla Camera,"
                  }
                },
                {
                  "id": "system",
                  "label": {
                    "en": "Local",
                    "de": "Lokal",
                    "nl": "Intern",
                    "it": "Locale,"
                  }
                },
                {
                  "id": "mm_dd",
                  "label": {
                    "en": "Short HH:MM DD-MM",
                    "de": "Kurz HH:MM DD-MM",
                    "nl": "Kort HH:MM DD-MM",
                    "it": "Corto HH:MM DD-MM,"
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Camera Information",
            "de": "Kamera Informationen",
            "nl": "Camera informatie",
            "it": "Informazioni sulla Camera,"
          },
          "children": [
            {
              "id": "urn",
              "type": "label",
              "label": {
                "en": "URN"
              },
              "value": ""
            },
            {
              "id": "manufacturer",
              "type": "label",
              "label": {
                "en": "Manufacturer",
                "de": "Hersteller",
                "nl": "Fabrikant",
                "it": "Costruttore,"
              },
              "value": ""
            },
            {
              "id": "model",
              "type": "label",
              "label": {
                "en": "Model",
                "de": "Model",
                "nl": "Model",
                "it": "Modello,"
              },
              "value": ""
            },
            {
              "id": "serialNumber",
              "type": "label",
              "label": {
                "en": "Serial Number",
                "de": "Serial Nummer",
                "nl": "Serienummer",
                "it": "Numero di Serie,"
              },
              "value": ""
            },
            {
              "id": "firmwareVersion",
              "type": "label",
              "label": {
                "en": "Firmware Version",
                "de": "Firmware Version",
                "nl": "Software versie",
                "it": "Versione del Firmware,"
              },
              "value": ""
            },
            {
              "id": "ip",
              "type": "label",
              "label": {
                "en": "IP Address",
                "de": "IP-Addresse",
                "nl": "IP adres",
                "it": "Indirizzo IP,"
              },
              "value": ""
            },
            {
              "id": "port",
              "type": "label",
              "label": {
                "en": "Port",
                "de": "Port",
                "nl": "Poort",
                "it": "Porta,"
              },
              "value": ""
            },
            {
              "id": "url",
              "type": "label",
              "label": {
                "en": "ONVIF Snapshot URL",
                "de": "ONVIF Standbild URL",
                "nl": "ONVIF snapshot URL",
                "it": "ONVIF Snapshot URL,"
              },
              "value": ""
            },
            {
              "id": "notificationMethods",
              "type": "label",
              "label": {
                "en": "ONVIF Notification methods",
                "de": "ONVIF Mitteilungs Methode",
                "nl": "ONVIF notificatie metode",
                "it": "ONVIF Metodi di notifica,"
              },
              "value": ""
            },
            {
              "id": "notificationTypes",
              "type": "label",
              "label": {
                "en": "ONVIF Notification types",
                "de": "ONVIF Mitteilungs Typen",
                "nl": "ONVIF notificatie type",
                "it": "ONVIF Tipi di notifica"
              },
              "value": ""
            }
          ]
        }
      ],
      "images": {
        "large": "/drivers/camera/assets/images/large.png",
        "small": "/drivers/camera/assets/images/small.png"
      }
    }
  ],
  "capabilities": {
    "date_time": {
      "type": "string",
      "title": {
        "en": "Camera Time",
        "de": "Kamera Zeit",
        "nl": "Camera tijd",
        "it": "Orario Camera,"
      },
      "icon": "/assets/camera_time.svg",
      "getable": true,
      "setable": false
    },
    "event_time": {
      "type": "string",
      "title": {
        "en": "Motion Event Time",
        "de": "Bewegungsausl√∂sungszeit",
        "nl": "Tijd van de beweging",
        "it": "Orario Evento Movimento"
      },
      "icon": "/assets/motion_time.svg",
      "getable": true,
      "setable": false
    },
    "motion_enabled": {
      "type": "boolean",
      "title": {
        "en": "Motion detection",
        "de": "Bewegung erkannt",
        "nl": "Beweging gedetecteerd",
        "it": "Rilevamento Movimento"
      },
      "getable": true,
      "setable": true,
      "uiComponent": "toggle",
      "icon": "/assets/motion.svg"
    },
    "tamper_time": {
      "type": "string",
      "title": {
        "en": "Offline / Tamper Time",
        "de": "Offline / Manipulationszeit",
        "nl": "Offline / sabotage tijd",
        "it": "Ora Offline / Tamper "
      },
      "icon": "/assets/tamper_time.svg",
      "getable": true,
      "setable": false
    }
  }
}